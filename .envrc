# Project Ultima: Epoch Engine — direnv configuration
# Stack: Node.js + Go + Vue (NO Python venv needed)

# ── Inherit API keys from genesis-core parent ──────────────────────────
# source_up traverses parent directories for .envrc
# This gives us ANTHROPIC_API_KEY, OPENAI_API_KEY, GOOGLE_API_KEY etc.
# Suppress parent echo (Genesis venv message is irrelevant here)
source_up 2>/dev/null 1>/dev/null || true

# ── Unset genesis-core Python venv (not needed here) ──────────────────
unset VIRTUAL_ENV VIRTUAL_ENV_PROMPT

# ── Project-specific ports ─────────────────────────────────────────────
export ORCHESTRATION_PORT=12064
export LOGISTICS_PORT=12065
export DASHBOARD_PORT=22064
export WS_PORT=32064

# ── Neo4j ──────────────────────────────────────────────────────────────
export NEO4J_URI=bolt://localhost:7687
export NEO4J_USER=neo4j
export NEO4J_PASSWORD=epochengine

# ── Logistics gRPC ─────────────────────────────────────────────────────
export LOGISTICS_GRPC_HOST=localhost:${LOGISTICS_PORT}

# ── Node/Go environment ───────────────────────────────────────────────
export NODE_ENV=development
export GIN_MODE=debug

# ── Load .env overrides (if exists) ───────────────────────────────────
dotenv_if_exists .env

# ── Status ─────────────────────────────────────────────────────────────
echo "⚙️  Epoch Engine aktif!"
echo "   Orchestration: localhost:${ORCHESTRATION_PORT}"
echo "   Logistics:     localhost:${LOGISTICS_PORT}"
echo "   Dashboard:     localhost:${DASHBOARD_PORT}"
echo "   WebSocket:     localhost:${WS_PORT}"
echo "   API Keys: $([ -n "$ANTHROPIC_API_KEY" ] && echo "✅" || echo "❌") Anthropic | $([ -n "$OPENAI_API_KEY" ] && echo "✅" || echo "❌") OpenAI"
